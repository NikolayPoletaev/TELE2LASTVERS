(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&c(s)}).observe(document,{childList:!0,subtree:!0});function n(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(e){if(e.ep)return;e.ep=!0;const o=n(e);fetch(e.href,o)}})();document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelectorAll('input[type="tel"]'),r=function(n){let c="+7 (___) ___-__-__",e=0,o=c.replace(/\D/g,""),s=n.target.value.replace(/\D/g,"");o.length>=s.length&&(s=o),n.target.value=c.replace(/./g,function(d){return/[_\d]/.test(d)&&e<s.length?s.charAt(e++):e>=s.length?"":d})};for(let n of t)for(let c of["input","blur","focus"])n.addEventListener(c,r)});const a=document.querySelector("#location"),m=document.querySelector(".location"),y=document.querySelectorAll(".location-modal__item"),p=document.querySelector(".location__city");function f(){const t=localStorage.getItem("city");t?(document.title=`Tele2 - ${t}`,p.textContent=t):document.title="Tele2 - Санкт-Петербург"}function _(t){localStorage.setItem("city",t)}f();m.addEventListener("click",()=>{a.showModal(),document.body.classList.add("scroll-lock")});function h(t){const r=new KeyframeEffect(t,[{opacity:"0"}],{duration:500,easing:"ease",direction:"normal"}),n=new Animation(r,document.timeline);n.play(),n.onfinish=()=>{t.close(),document.body.classList.remove("scroll-lock")}}y.forEach(t=>{t.addEventListener("click",()=>{h(a),_(t.textContent),f()})});function u(t,r,n){const c=t.querySelector(".instructions__form-feedback"),e=c.querySelectorAll("img");n?(e[0].classList.remove("hidden"),e[1].classList.add("hidden")):(e[1].classList.remove("hidden"),e[0].classList.add("hidden"));const o=c.querySelector("div");o.textContent=r,c.classList.remove("instructions__form-feedback_hidden")}const l=document.querySelector(".form-modal"),b=document.querySelector(".promo__block-action .btn"),g=document.querySelector(".form-modal .instructions__form-action .btn"),v=document.querySelector(".form-modal input[type='tel']"),S=document.querySelector(".form-modal .instructions__form-feedback"),L=l.querySelector(".instructions__form-checkbox");b.addEventListener("click",()=>{l.showModal(),document.body.classList.add("scroll-lock")});g.addEventListener("click",t=>{t.preventDefault(),v.value.length<18?u(l,"Неправильно введён номер",!1):L.checked?(u(l,"Промокод выслан на ваш номер",!0),setTimeout(()=>{l.querySelector("form").reset(),l.close(),document.body.classList.remove("scroll-lock"),S.classList.add("instructions__form-feedback_hidden")},1e3)):u(l,"Необходимо принять условия соглашения",!1)});const i=document.querySelector(".instructions__form"),k=i.querySelector("input[type='tel']"),q=i.querySelector("input[type='checkbox']"),C=i.querySelector(".instructions__form-action .btn");C.addEventListener("click",t=>{t.preventDefault(),k.value.length<18?u(i,"Неправильно введён номер",!1):q.checked?(u(i,"Промокод выслан на ваш номер",!0),i.reset()):u(i,"Необходимо принять условия соглашения",!1)});
